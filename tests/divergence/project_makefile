TESTS_DIVERGENCE_EXECUTABLES = \
  tests/divergence/get1d_div.exe \
  tests/divergence/get2d_div.exe \
  tests/divergence/get3d_div.exe \
  tests/divergence/get1d_grad.exe \
  tests/divergence/get2d_grad.exe \
  tests/divergence/get3d_grad.exe \
  tests/divergence/remove1d.exe \
  tests/divergence/remove2d.exe \
  tests/divergence/remove3d.exe

TESTS_DIVERGENCE_TESTS = \
  tests/divergence/get1d_div.mtst \
  tests/divergence/get2d_div.mtst \
  tests/divergence/get3d_div.mtst \
  tests/divergence/get1d_grad.mtst \
  tests/divergence/get2d_grad.mtst \
  tests/divergence/get3d_grad.mtst \
  tests/divergence/remove1d.mtst \
  tests/divergence/remove2d.mtst \
  tests/divergence/remove3d.mtst

tests/divergence_executables: $(TESTS_DIVERGENCE_EXECUTABLES)

tests/divergence_tests: $(TESTS_DIVERGENCE_TESTS)

tests/divergence_clean:
	@echo "CLEAN tests/divergence" && rm -f \
	  $(TESTS_DIVERGENCE_EXECUTABLES) \
	  $(TESTS_DIVERGENCE_TESTS)

EXECUTABLES += tests/divergence_executables
TESTS += tests/divergence_tests
CLEAN += tests/divergence_clean

MPICXX_TESTS_DIVERGENCE_MPICXX = \
  $(MPICXX) $< -o $@ \
  $(CPPFLAGS) \
  $(CXXFLAGS) \
  $(LDFLAGS) \
  $(DCCRG_CPPFLAGS) \
  $(GENSIMCELL_CPPFLAGS) \
  $(PRETTYPRINT_CPPFLAGS) \
  $(ZOLTAN_CPPFLAGS) \
  $(ZOLTAN_LDFLAGS) \
  $(ZOLTAN_LIBS)

tests/divergence/get1d_div.exe: \
  tests/divergence/get1d_div.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)

tests/divergence/get2d_div.exe: \
  tests/divergence/get2d_div.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)

tests/divergence/get3d_div.exe: \
  tests/divergence/get3d_div.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)

tests/divergence/get1d_grad.exe: \
  tests/divergence/get1d_grad.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)

tests/divergence/get2d_grad.exe: \
  tests/divergence/get2d_grad.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)

tests/divergence/get3d_grad.exe: \
  tests/divergence/get3d_grad.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)

tests/divergence/remove1d.exe: \
  tests/divergence/remove1d.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)

tests/divergence/remove2d.exe: \
  tests/divergence/remove2d.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)

tests/divergence/remove3d.exe: \
  tests/divergence/remove3d.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_MPICXX)
