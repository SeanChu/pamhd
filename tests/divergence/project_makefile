TESTS_DIVERGENCE_EXECUTABLES = \
  tests/divergence/get1d_div.exe \
  tests/divergence/get2d_div.exe \
  tests/divergence/get3d_div.exe \
  tests/divergence/get1d_grad.exe \
  tests/divergence/get2d_grad.exe \
  tests/divergence/get3d_grad.exe

TESTS_DIVERGENCE_TESTS = \
  tests/divergence/get1d_div.tst \
  tests/divergence/get2d_div.tst \
  tests/divergence/get3d_div.tst \
  tests/divergence/get1d_grad.tst \
  tests/divergence/get2d_grad.tst \
  tests/divergence/get3d_grad.tst

tests/divergence_executables: $(TESTS_DIVERGENCE_EXECUTABLES)

tests/divergence_tests: $(TESTS_DIVERGENCE_TESTS)

tests/divergence_clean:
	@echo "CLEAN tests/divergence" && rm -f \
	  $(TESTS_DIVERGENCE_EXECUTABLES) \
	  $(TESTS_DIVERGENCE_TESTS)

EXECUTABLES += tests/divergence_executables
TESTS += tests/divergence_tests
CLEAN += tests/divergence_clean

MPICXX_TESTS_DIVERGENCE_GET = \
  $(MPICXX) \
  $(CPPFLAGS) \
  $(CXXFLAGS) \
  $(LDFLAGS) \
  $(DCCRG_CPPFLAGS) \
  $(GENSIMCELL_CPPFLAGS) \
  $(PRETTYPRINT_CPPFLAGS) \
  $(ZOLTAN_CPPFLAGS) \
  $(ZOLTAN_LDFLAGS) \
  $(ZOLTAN_LIBS) \
  $< -o $@

tests/divergence/get1d_div.exe: \
  tests/divergence/get1d_div.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_GET)

tests/divergence/get2d_div.exe: \
  tests/divergence/get2d_div.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_GET)

tests/divergence/get3d_div.exe: \
  tests/divergence/get3d_div.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_GET)

tests/divergence/get1d_grad.exe: \
  tests/divergence/get1d_grad.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_GET)

tests/divergence/get2d_grad.exe: \
  tests/divergence/get2d_grad.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_GET)

tests/divergence/get3d_grad.exe: \
  tests/divergence/get3d_grad.cpp \
  source/divergence/remove.hpp
	@echo "MPICXX "$< && $(MPICXX_TESTS_DIVERGENCE_GET)
