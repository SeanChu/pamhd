TESTS_PARTICLE_EXECUTABLES = \
  tests/particle/solve1.exe \
  tests/particle/common.exe \
  tests/particle/odeint.exe \
  tests/particle/dipole_odeint.exe \
  tests/particle/create_particles.exe \
  tests/particle/accumulate.exe

TESTS_PARTICLE_TESTS = \
  tests/particle/solve1.tst \
  tests/particle/common.tst \
  tests/particle/odeint.tst \
  tests/particle/dipole_odeint.tst \
  tests/particle/create_particles.tst \
  tests/particle/accumulate.tst

tests/particle_executables: $(TESTS_PARTICLE_EXECUTABLES)

tests/particle_tests: $(TESTS_PARTICLE_TESTS)

tests/particle_clean_results:
	@printf "CLEAN RESULTS tests/particle\n" && rm -f \
	  tests/particle/*.dat \
	  tests/particle/*.png

tests/particle_clean:
	@printf "CLEAN tests/particle\n" && rm -f \
	  $(TESTS_PARTICLE_EXECUTABLES) \
	  $(TESTS_PARTICLE_TESTS)

EXECUTABLES += tests/particle_executables
TESTS += tests/particle_tests
RESULTS += tests/particle_clean_results
CLEAN += tests/particle_clean


TEST_PARTICLE_COMMON_DEPS = \
  source/particle/variables.hpp \
  tests/particle/project_makefile \
  $(ENVIRONMENT_MAKEFILE) \
  Makefile

TEST_PARTICLE_COMMON_COMPILE = \
  $< -o $@ \
  $(CPPFLAGS) \
  $(CXXFLAGS) \
  $(LDFLAGS) \
  $(BOOST_CPPFLAGS) \
  $(EIGEN_CPPFLAGS) \
  $(GENSIMCELL_CPPFLAGS) \
  $(PRETTYPRINT_CPPFLAGS)

tests/particle/solve1.exe: \
  tests/particle/solve1.cpp \
  $(TEST_PARTICLE_COMMON_DEPS) \
  source/particle/solve.hpp
	@printf "CXX $<\n" && $(CXX) $(TEST_PARTICLE_COMMON_COMPILE)

tests/particle/common.exe: \
  tests/particle/common.cpp \
  $(TEST_PARTICLE_COMMON_DEPS) \
  source/particle/common.hpp
	@printf "CXX $<\n" && $(CXX) $(TEST_PARTICLE_COMMON_COMPILE)

tests/particle/odeint.exe: \
  tests/particle/odeint.cpp \
  $(TEST_PARTICLE_COMMON_DEPS) \
  source/particle/common.hpp
	@printf "CXX $<\n" && $(CXX) $(TEST_PARTICLE_COMMON_COMPILE) \
	  $(BOOST_CPPFLAGS) \
	  $(BOOST_LDFLAGS) \
	  $(BOOST_LIBS) \
	  -Wno-unused-variable \
	  -Wno-unused-parameter \
	  -Wno-unused-function

tests/particle/dipole_odeint.exe: \
  tests/particle/dipole_odeint.cpp \
  $(TEST_PARTICLE_COMMON_DEPS)
	@printf "CXX $<\n" && $(CXX) $(TEST_PARTICLE_COMMON_COMPILE) \
	  $(BOOST_CPPFLAGS) \
	  $(BOOST_LDFLAGS) \
	  $(BOOST_LIBS) \
	  -Wno-unused-variable \
	  -Wno-unused-parameter \
	  -Wno-unused-function

tests/particle/create_particles.exe: \
  tests/particle/create_particles.cpp \
  $(TEST_PARTICLE_COMMON_DEPS) \
  source/particle/common.hpp
	@printf "CXX $<\n" && $(CXX) $(TEST_PARTICLE_COMMON_COMPILE)

tests/particle/accumulate.exe: \
  tests/particle/accumulate.cpp \
  $(TEST_PARTICLE_COMMON_DEPS) \
  source/particle/accumulate.hpp
	@printf "CXX $<\n" && $(CXX) $(TEST_PARTICLE_COMMON_COMPILE)

tests/particle/reference.exe: \
  tests/particle/reference.cpp \
  $(TEST_PARTICLE_COMMON_DEPS) \
  source/particle/common.hpp \
  source/particle/solve.hpp
	@printf "CXX $<\n" && $(CXX) \
	  $(TEST_PARTICLE_COMMON_COMPILE) \
	  $(BOOST_CPPFLAGS) \
	  $(BOOST_LDFLAGS) \
	  $(BOOST_LIBS)
